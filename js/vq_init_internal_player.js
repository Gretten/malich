/*! v0.2.72 built Mon Sep 03 2018 12:29:44 GMT+0300 (MSK) */
!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};e[n].call(i.exports,i,i.exports,t);i.l=!0;return i.exports}var r={};t.m=e;t.c=r;t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})};t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};t.d(r,"a",r);return r};t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.p="";t(t.s=845)}({111:function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"a",function(){return c});var n=r(46),i=r(13),o=r(4),a=i.a.baseUrl,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"popular";return new Promise(function(i,s){Object(o.u)(Object(o.b)(a+"/profile/"+e+"/"+r,t),function(e){try{var t=JSON.parse(e.responseText),r=Object(n.a)(t);if(r){s(r);return}i(t)}catch(e){s("Failed to response recommendation: "+e)}},function(){s("Failed to response reccomendation")})})},c=function(e){return new Promise(function(t,r){Object(o.u)(a+"/data/"+e+"/metadata",function(e){try{var i=JSON.parse(e.responseText),o=Object(n.a)(i);if(o){r(o);return}t(i)}catch(e){r("Failed to response recommendation: "+e)}},function(){r("Failed to resonse getMetaData")})})}},129:function(e,t){e.exports='<svg width="100%" height="100%" viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:1.41421;">\n    <g id="svg_1" transform="matrix(0.5,-2.31112e-34,0,0.5,-1,-1)">\n        <circle cx="32" cy="32" r="28" style="fill-opacity:0.301961;"/>\n    </g>\n</svg>\n'},13:function(e,t,r){"use strict";var n=r(4),i=r(49);t.a=(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e})({},i.a,Object(n.i)("viqeo-config"))},130:function(e,t){e.exports='<svg width="100%" height="100%" viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:1.41421;">\n    <g id="svg_1" transform="matrix(0.5,-2.31112e-34,0,0.5,-1,-1)">\n        <circle cx="32" cy="32" r="28" style="fill-opacity:0.501961;stroke:white;stroke-width:3px;"/>\n    </g>\n</svg>\n'},15:function(e,t,r){"use strict";t.a={preview:1400,videoContainer:500,overlayContainer:1500,spinner:1450,playerLogo:3e3,editorButtons:3e3,swipeForward:3e3,blick:4e3,subtitles:1e3,play:1475,volume:1475,progress:1475,mobileTouchProgress:1500,copyright:1475,fullScreen:1475,settings:1475,mobilePanel:3050,videoMode:1475,splashControls:1250,unpublishedLabel:1500,timelineSprite:1475,emptySlot:7500,task:7500,recommendationPreview:4e3,contextMenu:9e3,advert:1e4,flyPlayer:2147483547}},18:function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},208:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(4),s=r(3),c=r(21),l=r(42),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d="BaseLoayout";t.a=function(e){function t(r){var o=r.playersManager,a=r.type;n(this,t);var s=i(this,e.call(this));s._hasObserveDom=!1;s._profileId=null;s._ids={};s._type=a;s._players=[];s.playersManager=o;return s}o(t,e);t.prototype.loadData=function(){var e=this;return new Promise(function(t,r){var n=e.getUrl(),i=e.getValuesForRequest(),o="GET";i&&(o="POST");c.a.log(d+" Init startup url:"+n+" values:"+JSON.stringify(i));c.a.time(d+" Load data url:"+n);e.beforeLoadData();Object(a.u)(n,function(i){c.a.timeEnd(d+" Load data url:"+n);c.a.log(d+" Data startup "+i.responseText);try{var o=JSON.parse(i.responseText),a=o.status,s=o.message;if("error"!==a){t(o);e._loadData(o);e.trigger("Tracking",{container:e._type,eventName:"Init:StartupDataLoaded",data:o,profileId:e._profileId})}else r(s)}catch(e){r("Failed to parse profile json: "+e)}},function(e){c.a.error(d+" Failed load init: "+e);r(e)},!1,o,i)})};t.prototype._loadData=function(e){e.dynamic&&this._initDynamicPlayer();this.playersManager.initLoaded(e)};t.prototype._initDynamicPlayer=function(){var e=this;if("undefined"!=typeof MutationObserver&&!this._hasObserveDom){this._hasObserveDom=!0;var t=new MutationObserver(function(t){t.forEach(function(t){var r=t.addedNodes;Array.from(r).forEach(function(t){t.querySelectorAll&&e.findElements(t)})})}),r={childList:!0,attributes:!1,characterData:!1,subtree:!0};t.observe(document.body,r)}};t.prototype.run=function(){this.findElements()};t.prototype._createEmptyId=function(e){this._ids[e]={frameData:null,initData:null,hasLoad:!1,elements:[]}};t.prototype.parseIds=function(e,t){var r=this;Array.from(e).forEach(function(e){var n=e.getAttribute(t);r._ids[n]||r._createEmptyId(n);r._ids[n].elements.find(function(t){return t.mark===e})||r._ids[n].elements.push({mark:e,getPlayer:null})})};t.prototype.getNotLoadedIds=function(){var e=this,t=[];Object.keys(this._ids).forEach(function(r){e._ids[r].hasLoad||t.push(r)});return t};t.createSlot=function(e){var t=document.createElement("div");t.className="viqeo-slot";t.setAttribute("data-video_id",e);return t};t.getReferer=function(){var e=document.querySelector('meta[property="og:url"]');return e?Object(a.w)(e.content):location.href};t.prototype.createPlayers=function(){var e=this;Object.keys(this._ids).forEach(function(r){var n=e._ids[r],i=n.elements,o=n.frameData,a=n.initData;o&&i.forEach(function(n,l){var p=n.mark;if(!n.getPlayer){var f=t.createSlot(r);p.parentNode.insertBefore(f,p.nextSibling);c.a.time(d+" Video in player load id="+r);i[l].getPlayer=e.getPlayer(u({},a,{slot:f,mark:p,originalSlot:p.parentNode,data:o,profileId:e._profileId,trackerFn:e._triggerTrackerPlayer.bind(e)}),p);i[l].getPlayer.then(function(t){var n=!!p.querySelector("iframe")||p.children.length>0,i=o.mediaFiles||[];n&&i.length>0&&t.getContainer().style.setProperty("display","none","important");if(!i.length){Object(s.d)(p,{height:0,padding:0});(!a||a&&"user"===a.role)&&t.resizeAd(0,0)}t.subscribe(function(){c.a.timeEnd(d+" Video in player load id="+r);Object(s.p)(p);t.getContainer().style.setProperty("display","block","important");t.checkVisible()},"AdLoaded");e.pushPlayer(t)})}})})};t.prototype._triggerTrackerPlayer=function(e,t,r){this.trigger("Tracking",u({eventName:"Player:"+e,slotId:r.getSlotId(),container:this._type,player:r},r.options.paramsForGlobalEvent,t))};t.prototype.pushPlayer=function(e){this._players.push(e);this.trigger("Tracking",{eventName:"Player:added",slotId:e.getSlotId(),container:this._type,player:e})};t.prototype.getPlayers=function(){return this._players};t.prototype.beforeLoadData=function(){var e=this;Object.keys(this._ids).forEach(function(t){e._ids[t].hasLoad=!0})};t.prototype.getPlayer=function(){};t.prototype.findElements=function(){};t.prototype.getUrl=function(){};t.prototype.getValuesForRequest=function(){};return t}(l.a)},21:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=r(4),o={NONE:0,ERROR:1,WARN:2,LOG:3,TRACK:4,DEBUG:5,TRACE:6},a=/[?&]vq_debug\b(?:=(\d+))?/.exec(window.location.search),s=(a&&Math.max(o.NONE,Math.min(o.TRACE,a[1]||o.LOG)),function(){function e(){n(this,e);this._logs=[];this._logsTime={}}e.prototype.error=function(e){this._send(o.ERROR,e,"color: red; font-weight: bold")};e.prototype.warn=function(e){this._send(o.WARN,e,"color: red")};e.prototype.log=function(e){this._send(o.LOG,e,"")};e.prototype.track=function(e){this._send(o.TRACK,e,"color: darkblue")};e.prototype.debug=function(e){this._send(o.DEBUG,e,"color: darkgray")};e.prototype.trace=function(e){this._send(o.TRACE,e,"color: lightgray")};e.prototype.time=function(e){this._logsTime[e]=+new Date;this.log(""+e)};e.prototype._send=function(e,t,r){var n="VIQEO_LOG|%c["+(new Date).toISOString().slice(11,-1)+"] "+t;this._logs.push(n)};e.prototype.timeEnd=function(e){var t=this._logsTime[e];if(t){this.log(e+". Timer ended: "+(+new Date-t)/1e3+"sec")}else this.error("logger.timeEnd("+e+") Not found: "+e)};e.prototype.getLogs=function(){return this._logs};e.prototype.copy=function(){var e={logs:this._logs,playersState:[]},t=window.VIQEO;if(t){t.getPlayers().forEach(function(t){return e.playersState.push(t.store.getState())})}Object(i.f)(JSON.stringify(e));console.info("Лог скопировался")};return e}());window.vqLogger=window.vqLogger?window.vqLogger:new s;t.a=window.vqLogger},29:function(e,t,r){"use strict";t.a={STARTED:"started",ENDED:"ended",PAUSED:"paused",REPLAYED:"replayed",PLAYED:"played"}},3:function(e,t,r){"use strict";r.d(t,"e",function(){return i});r.d(t,"n",function(){return o});r.d(t,"p",function(){return a});r.d(t,"o",function(){return s});r.d(t,"d",function(){return c});r.d(t,"c",function(){return l});r.d(t,"a",function(){return p});r.d(t,"b",function(){return h});r.d(t,"m",function(){return y});r.d(t,"l",function(){return v});r.d(t,"f",function(){return g});r.d(t,"i",function(){return b});r.d(t,"g",function(){return m});r.d(t,"k",function(){return _});r.d(t,"s",function(){return w});r.d(t,"j",function(){return O});r.d(t,"q",function(){return k});r.d(t,"r",function(){return j});r.d(t,"h",function(){return S});r.d(t,"t",function(){return E});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){e.preventDefault();e.stopPropagation()},o=function(e,t){return e&&("object"===(void 0===e?"undefined":n(e))||"function"==typeof e)&&"string"==typeof e.innerHTML&&(!t||t.toUpperCase()===e.tagName)},a=function(e){e&&e.parentNode&&e.parentNode.removeChild(e);return null},s=function(e){(o(e,"video")||o(e,"audio"))&&Promise.resolve(e.play()).catch(function(){})},c=function(e,t){var r=[].concat(e);Object.keys(t).forEach(function(e){var n=t[e];void 0!==n&&r.forEach(function(t){t.style[e]=n})});return e},l=function(e,t,r,i,o){var a=document.createElement(t);switch(void 0===r?"undefined":n(r)){case"object":c(a,r);break;case"string":a.className=r}a.innerHTML=i||"";a.addEventListener("click",o);return e.appendChild(a)},u=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},d=function(e,t){var r=e.ownerDocument.createElement("style");r.type="text/css";r.styleSheet?r.styleSheet.cssText=t:r.appendChild(e.ownerDocument.createTextNode(t));e.appendChild(r)},p=function(e,t){var r=[];Object.keys(t).forEach(function(e){var n=t[e],i=[];Object.keys(n).forEach(function(e){var t=n[e],r=u(e);i.push(r+":"+t)});var o=e+"{"+i.join("")+"}";r.push(o)});var n=r.join("");d(e,n)},f=[],h=function(e,t,r){var n=f.find(function(t){return t.el===e});if(!n||!n.names.find(function(e){return e===t})){var i="@keyframes "+t,o=[];r.forEach(function(e){var t=e.css,r=e.percent,n=[];Object.keys(t).forEach(function(e){var r=t[e],i=u(e);n.push(i+":"+r+";")});var i=n.join(" ");o.push(r+" {"+i+"}")});d(e,i+" {"+o.join("")+"}");n?n.names.push(t):f.push({el:e,names:[t]})}},y=function(e){var t=e.clientWidth,r=getComputedStyle(e),n=r.paddingLeft,i=r.paddingRight;return t-parseFloat(n)-parseFloat(i)},v=function(e){var t=e.clientHeight,r=getComputedStyle(e),n=r.paddingTop,i=r.paddingBottom;return t-parseFloat(n)-parseFloat(i)},g=function(e,t){var r=e.contentWindow["on"+t];e.contentWindow["on"+t]=function(n){r&&r(n);var i=document.createEvent("MouseEvents"),o=e.getBoundingClientRect();i.initMouseEvent(""+t,!0,!1,window,n.detail,n.screenX,n.screenY,n.clientX+o.left,n.clientY+o.top,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,null);e.dispatchEvent(i)}},b=function(e){var t=e.getBoundingClientRect(),r=document.body,n=document.documentElement,i=window.pageXOffset||n.scrollLeft||r.scrollLeft,o=n.clientLeft||r.clientLeft||0;return Math.round(t.left+i-o)},m=function(e){var t=document.createElement("textarea");t.innerHTML=e;return t.value},_=function(e){e.style.display&&"block"!==e.style.display||c(e,{display:"none"})},w=function(e){e.style.display&&"none"!==e.style.display||c(e,{display:"block"})},P=function(e){var t=window,r=e,n=document.documentElement,i=t.offsetHeight||window.innerHeight,o=!isNaN(t.scrollTop)&&t.scrollTop||(window.pageYOffset||n.scrollTop)-(n.clientTop||0);return{viewportHeight:i,viewportTop:o,viewportBottom:o+i,moduleTop:r.getBoundingClientRect().top}},O=function(e){var t=e.offsetHeight,r=parseInt(t,10),n=P(e),i=n.viewportTop,o=n.viewportBottom,a=n.moduleTop,s=Math.max(i,i+a),c=Math.min(o,s+a+r),l=Math.max(0,Math.min(r,c-s));return r&&l/r},k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,j=function(e,t,r){var n="";if(r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3);n="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"},S=function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n+=1){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},E=function(e){var t=l(e,"div",{height:0,width:"100%",paddingBottom:"100%",position:"relative"});return l(t,"div",{position:"absolute",top:0,left:0,right:0,bottom:0})}},38:function(e,t){e.exports={editor:"vn_editor",stats:"vn_stats",player:"vn_player",starter:"vq_starter",playerInit:"vq_player_init",editorInit:"vq_editor_init",initExternalPlayer:"vq_init_external_player",initInternalPlayer:"vq_init_internal_player",wordpressPluginInit:"vq_wordpress_plugin_init",wordpressButton:"vq_wordpress_button",gallery:"vq_gallery"}},4:function(e,t,r){"use strict";r.d(t,"o",function(){return s});r.d(t,"m",function(){return c});r.d(t,"d",function(){return l});r.d(t,"t",function(){return u});r.d(t,"b",function(){return d});r.d(t,"w",function(){return p});r.d(t,"q",function(){return f});r.d(t,"u",function(){return h});r.d(t,"y",function(){return y});r.d(t,"s",function(){return v});r.d(t,"i",function(){return g});r.d(t,"v",function(){return b});r.d(t,"z",function(){return m});r.d(t,"g",function(){return _});r.d(t,"a",function(){return w});r.d(t,"c",function(){return P});r.d(t,"e",function(){return O});r.d(t,"n",function(){return k});r.d(t,"x",function(){return S});r.d(t,"l",function(){return E});r.d(t,"k",function(){return T});r.d(t,"h",function(){return x});r.d(t,"f",function(){return A});r.d(t,"p",function(){return I});r.d(t,"r",function(){return L});r.d(t,"j",function(){return N});var n=r(43),i=(r(3),r(9)),o=r(21),a=this,s=("function"==typeof Symbol&&Symbol,function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.document;if(e){o.a.time("utils.loadScript("+e+")");var i=n.getElementsByTagName("head")[0],a=n.createElement("script");a.src=e;a.type="text/javascript";a.charset="UTF-8";a.addEventListener("load",function(){o.a.timeEnd("utils.loadScript("+e+")");t&&t()});a.addEventListener("error",function(){o.a.error("utils.loadScript("+e+") Failed load");r&&r()});i.appendChild(a)}}),c=function(e,t,r){var n=e&&t?e.querySelector(t):e,i=n&&n.textContent;return"string"==typeof i?i.trim():r},l=function(e){return JSON.parse(JSON.stringify(e))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[1]||"",r=t?t.split("&"):[];return Object.keys(r).reduce(function(e,t){var n=r[t],i=n.split("="),o=i[0]&&decodeURIComponent(i[0]),a=i[1]&&decodeURIComponent(i[1]);e[o]=a&&a.replace(/\+/g," ");return e},{})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];Object.keys(t).forEach(function(e){var n=t[e],i=[encodeURIComponent(e)];if(Array.isArray(n)){var o=encodeURIComponent("[]");n.forEach(function(e){var t=encodeURIComponent(e);r.push(""+i+o+"="+t)})}else{null!==n&&void 0!==n&&i.push(encodeURIComponent(n));r.push(i.join("="))}});var n=e.indexOf("?")>-1?"&":"?";return r.length?e+n+r.join("&"):e},p=function(e){return"//"===e.substring(0,2)?document.location.protocol+e:"/"===e.substring(0,1)?document.location.protocol+"//"+document.location.hostname+e:e},f=function(e){if(e)if(i.e){var t=document.createElement("a");t.setAttribute("href",e);t.setAttribute("target","_blank");var r=document.createEvent("HTMLEvents");r.initEvent("click",!0,!0);t.dispatchEvent(r)}else window.open(e,"_blank");else o.a.warn("utils.openUrl("+e+") invalid url")},h=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"GET",o=arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(!e)return null;var c=window.XDomainRequest?window.XDomainRequest:XMLHttpRequest,l=new c;n&&l.overrideMimeType&&l.overrideMimeType(n);t&&(l.onload=t.bind(a,l));r&&(l.onerror=r.bind(a,l));l.open(i,e,!0);l.withCredentials=s;var u=null;if(o){l.setRequestHeader("Content-type","application/json");u=JSON.stringify(o)}l.send(u);return l},y=function(e,t,r,n,i){var o=new XMLHttpRequest;o.withCredentials=!0;r&&o.addEventListener("load",r.bind(a,o));n&&o.addEventListener("error",n.bind(a,o));i&&o.upload.addEventListener("progress",i);o.open("POST",e,!0);o.send(t);return o},v=function(e){if("0"===e)return null;var t=/^\s*(?:(?:(\d+):)?(\d+):)?(\d+)(?:[.,](\d+))?\s*$/.exec(e);return t?(60*(+t[1]||0)*60*1e3+60*(+t[2]||0)*1e3+1e3*(+t[3]||0)+(+t[4]||0))/1e3:null},g=function(e){try{return JSON.parse(localStorage.getItem(e))||!1}catch(e){return!1}},b=function(e,t){try{return localStorage.setItem(e,t)}catch(e){return!1}},m=function(e){return e>9?e:"0"+e},_=function(e){return[e.getFullYear(),m(e.getMonth()+1),m(e.getDate())].join("-")},w=function(e){var t=performance.now(),r=function r(n){var i=(n-t)/e.duration;i>1&&(i=1);var o=e.timing(i);e.draw(o);i<1&&requestAnimationFrame(r)};requestAnimationFrame(r)},P=function(e,t,r,n,i){var o=Math.min;"crop"===i&&(o=Math.max);var a=o(r/e,n/t);return{width:e*a,height:t*a}},O=function(e){var t=Math.floor(e/60),r=e-60*t;return[m(t),m(r)].join(":")},k=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t="",r=0;r<e;r+=1)t+=Math.random().toString(16).slice(-4);return t},j=function(e){var t=Math.round(1e3*e)-1e3*Math.floor(e),r=m(parseInt(Math.floor(e)%60,10)),n=m(parseInt(Math.floor(e)/60%60,10));return m(parseInt(Math.floor(e)/60/60%60,10))+":"+n+":"+r+"."+t},S=function(e){return e.parsedSubtitles.map(function(e,t){return t+1+"\n"+j(e.startTime)+" --\x3e "+j(e.endTime)+"\n"+e.text+"\n"}).join("\n")},E=function(e){var t=e.video,r=e.preview,i=e.subtitles,o=e.preset,a=e.editing,s=t.selectedVideoFile,c=t.prodVideoFile,l=r.selectedPreviewFile,u=r.prodPreviewFile,d=i.selectedSubtitle,p=i.prodSubtitle,f=i.selectedSubtitlePreset,h=i.prodSelectedSubtitlePreset,y=i.selectedStyles,v=i.prodStyles,g=i.subtitlesList,b=i.prodSubtitlesList,m=a.appliedEffects,_=a.selectAppliedEffects,w=o.selectedItem,P=o.prodItem,O=o.prodSettings,k=o.currentSettings,j=[];s!==c&&j.push({type:"video",selected:s,prod:c});l!==u&&j.push({type:"preview",selected:l,prod:u});d.id!==p.id&&j.push({type:"subtitle",selected:d,prod:p});var S=Object(n.a)(g,b);if(S){var E=S[0].path[0];j.push({type:"subtitlesList",selected:g[E],prod:b[E]})}f!==h?j.push({type:"preset_subtitle",selected:{id:f}}):Object(n.a)(v,y)&&j.push({type:"subtitle_styles",selected:y});w&&w.id&&w.id!==P.id?j.push({type:"preset",selected:w}):Object(n.a)(O,k)&&j.push({type:"edit_preset",selected:k});Object(n.a)(m,_)&&j.push({type:"filters",selected:_,item:s});return j},T=function(e){var t=0;e&&e.cut&&(t=e.cut.from/1e3);return t},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=String(e).split("."),n=r[0],i=r[1];i&&i.length>t&&(i=i.slice(0,t));return parseFloat(n+"."+i)},A=function(e){var t=document.createElement("textarea");t.style.position="fixed";t.style.top=0;t.style.left=0;t.style.width="2em";t.style.height="2em";t.style.padding=0;t.style.border="none";t.style.outline="none";t.style.boxShadow="none";t.style.background="transparent";t.value=e;document.body.appendChild(t);t.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(t)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0===(""+e).length||/%|px/.test(""+e)?""+e:e+"px"},L=function(e){var t=void 0;try{t=JSON.parse(e)}catch(e){return!1}return t},N=function(){return window.navigator.language&&"ru"===window.navigator.language.substring(0,2)?"ru":"en"}},415:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(4),s=r(46),c=r(45),l=r(13),u=r(60),d=r(69),p=r(97),f={waitCheck:"waitCheck",processCheck:"processCheck"};t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._players=[];o._ids={};o._role=p.a.USER;o._profileId=null;o._subscribeTasks=["applying_filters","convert_video","extract_subtitles"];o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){var e=[d.a.stdPlayer,d.a.extPlayer,d.a.recommendPlayer,d.a.viqeoPersonlaPlayer];this.subscribeTracking(this._playerAdded.bind(this),{eventName:"Player:added",container:e});this.subscribeTracking(this._playerDestroyed.bind(this),{eventName:"Player:destroyed",container:e});this.subscribeTracking(this._startupLoaded.bind(this),"Init:StartupDataLoaded");this.subscribeTracking(this._editorTaskProcessing.bind(this),"Init:TaskProcessed")};t.prototype._playerDestroyed=function(e){var t=e.player,r=this._players.indexOf(t);r>-1&&this._players.splice(r,1)};t.prototype._editorTaskProcessing=function(e){var t=e.task,r=e.videoId;this._players.forEach(function(e){e.getSlotId()===r&&e.setTask(t)})};t.prototype._playerAdded=function(e){var t=e.player,r=e.slotId;this._players.push(t);this._ids[r]||(this._ids[r]={status:f.waitCheck});this._profileId=t.getProfileId();this._searchTask()};t.prototype._startupLoaded=function(e){var t=e.data.role,r=e.profileId;this._role=t;this._profileId=r;this._searchTask()};t.prototype._searchTask=function(){var e=this;this._role===p.a.EDITOR&&Object.keys(this._ids).forEach(function(t){e._ids[t].status===f.waitCheck&&Promise.resolve(e._getTasks(t)).then(e._findTask.bind(e)).then(e._taskProcess.bind(e)).then(e._reloadSlotId.bind(e))})};t.prototype._getTasks=function(e){this._ids[e]=f.processCheck;var t=l.a.baseUrl+"/profile/"+this._profileId+"/video/"+e+"/tasks";return new Promise(function(r,n){Object(a.u)(t,function(t){try{var i=JSON.parse(t.responseText);Object(s.a)(i)?n():r({response:i,videoId:e})}catch(e){n()}},function(){return n()})})};t.prototype._findTask=function(e){var t=this,r=e.response.items,n=e.videoId;return new Promise(function(e){for(var i=0;i<r.length;i+=1){var o=r[i],a=o.tag,s=o.status;if(-1!==t._subscribeTasks.indexOf(a)&&"done"!==s&&"error"!==s){e({response:r[i],videoId:n});return}}})};t.prototype._taskProcess=function(e){var t=this,r=e.response,n=e.videoId,i=function(e){var r=e.items;t._players.forEach(function(e){e.getSlotId()===n&&e.setTask(r)})},o=r.token;return new Promise(function(e){Object(c.r)(o,i).then(function(t){return e({response:t,videoId:n})},i)})};t.prototype._reloadSlotId=function(e){var t=e.response.items,r=e.videoId;this._players.forEach(function(e){if(e.getSlotId()===r){e.setTask(t);Object(a.u)(l.a.baseUrl+"/data/"+r+"/metadata",function(t){e.init({data:JSON.parse(t.responseText).items[0]})})}})};return t}(u.a)},416:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function(){function e(){n(this,e);this._events=[]}e.prototype._triggerTracking=function(e){for(var t=0;t<this._events.length;t+=1){for(var r=this._events[t],n=r.cb,i=r.filter,o=Object.keys(i),a=!0,s=0;s<o.length;s+=1){var c=o[s];if(Array.isArray(i[c])){if(-1===i[c].indexOf(e[c])){a=!1;break}}else if(i[c]!==e[c]){a=!1;break}}a&&n(e)}return!0};e.prototype.subscribeTracking=function(e,t){var r=t||{};"string"==typeof r&&(r={eventName:t});this._events.push({cb:e,filter:r})};e.prototype.unsubscribeTracking=function(e){this._events=[].concat(this._events).filter(function(t){return e!==t.cb})};return e}()},417:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(42),s=r(13),c=r(4),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var o=i(this,e.call(this));o._modules={};o._videoGallery=null;o.role=r.role;o._scripts={};o._hasPreload=!0;o.getScript(s.a.playerScriptUrl);o.getScript(s.a.galleryScriptUrl);document.addEventListener("viqeo:changeLanguage",function(e){return o.setLanguage(e.detail.locale)});o.setLanguage(Object(c.j)());o._loadEditorScripts();return o}o(t,e);t.prototype.initLoaded=function(e){this.role=e.role||"user";this._loadEditorScripts()};t.prototype._loadEditorScripts=function(){var e=this;if("editor"===this.role){[s.a.editorScriptUrl,s.a.statsScriptUrl].forEach(function(t){return e.getScript(t)})}};t.prototype.getScript=function(e){this._scripts[e]||(this._scripts[e]=new Promise(function(t,r){Object(c.o)(e,t,r)}));return this._scripts[e]};t.prototype.showModal=function(e,t,r,n){var i=this;return new Promise(function(o){i._modules[e]||(i._modules[e]={});var a=i._modules[e][t];if(a){o(a);a.show()}else i.getScript(r).then(function(){i._modules[e][t]=n();var r=t.charAt(0).toUpperCase()+t.slice(1);i._modules[e][t].subscribeAll(function(e){i.trigger("Tracking",{eventName:r+":"+e.type})});o(i._modules[e][t]);i._modules[e][t].show()})})};t.prototype.onUploadVideo=function(e,t){var r=this,n=l({language:this.language,callbacks:{setTask:function(t){r.trigger("Tracking",{eventName:"Init:TaskProcessed",task:t,videoId:e.getSlotId()})}}},t);this.showModal(e.getSlotId(),"editor",s.a.editorScriptUrl,function(){return window.getVQEditor(e,n)})};t.prototype._createVideoGallery=function(e){var t=this;return new Promise(function(r){t.getScript(s.a.galleryScriptUrl).then(function(){t._videoGallery=window.getVQVideoGallery(e);t._videoGallery.subscribe(function(e){return t.trigger("Tracking",e)},"Tracking");r()})})};t.prototype._pushPlayer=function(e,t){var r=this,n=e.getSlotId();if(this._modules[n]){this._modules[n].player=e;this._modules[n].params=this._modules[n].params||{}}else this._modules[n]={player:e,params:{}};this._modules[n].params=l({},this._modules[n].params,t);var i={language:this.language,profileId:e.getProfileId(),videoId:n};e.subscribe(this.showModal.bind(this,n,"editor",s.a.editorScriptUrl,function(){return window.getVQEditor(e,l({callbacks:{setTask:function(t){r.trigger("Tracking",{eventName:"Init:TaskProcessed",task:t,videoId:e.getSlotId()})}}},i))}),"Modal:editor");e.subscribe(this.showModal.bind(this,n,"stats",s.a.statsScriptUrl,function(){return window.getVQStats(e,l({},i,t))}),"Modal:stats")};t.prototype.createPlayer=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n){t.getScript(s.a.playerScriptUrl).then(function(){var i=t._hasPreload;t._hasPreload&&(t._hasPreload=!1);e.options?e.options.preload=!!e.options.preload&&i:e.options={preload:i};var o=window.getVQPlayer(l({language:t.language},e));t._videoGallery?t._videoGallery.push(o,e):t._createVideoGallery({language:t.language,profileId:e.profileId}).then(function(){return t._videoGallery.push(o,e)});t._pushPlayer(o,l({},r,{playerData:e.data}));n(o)})})};t.prototype.setLanguage=function(e){var t=this._modules;Object.keys(t).forEach(function(r){Object.keys(t[r]).forEach(function(n){t[r][n].setLanguage&&t[r][n].setLanguage(e)})});this._videoGallery&&this._videoGallery.setLanguage(e);this.language=e};t.prototype.getPlayerBy=function(e){for(var t=this.getAllPlayers(),r=void 0,n=0;n<t.length;n+=1){r=t[n];if(e.contains(r.getParent()))break;r=null}return r};t.prototype.getPlayers=function(){var e=this._modules,t=[];Object.keys(e).forEach(function(r){t.push(e[r].player)});return t};t.prototype.getAllPlayers=function(){var e=this._modules,t=[];Object.keys(e).forEach(function(r){t.push(e[r].player)});return t};t.prototype.getSlot=function(e){return e.getParent()};t.prototype.resize=function(){this.getAllPlayers().forEach(function(e){return e.forceResize()})};t.prototype.destroy=function(e){var t=this._modules[e].player;if(t){t.destroy();delete this._modules[e]}};t.prototype.hide=function(e){var t=this._modules;Object.keys(t).forEach(function(r){Object.keys(t[r]).forEach(function(n){!t[r][n].hide||e&&e!==r||t[r][n].hide()})})};return t}(a.a)},42:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(){function e(){n(this,e);this.eventListeners={};this.listeners=[]}e.prototype.subscribe=function(e,t){this.eventListeners[t]=[].concat(this.eventListeners[t]||[],e)};e.prototype.subscribeAll=function(e){this.listeners.push(e)};e.prototype.subscribeOnce=function(e,t){var r=this;this.subscribe(function n(){e.apply(void 0,arguments);r.unsubscribe(n,t)},t)};e.prototype.unsubscribe=function(e,t){this.eventListeners[t]=[].concat(this.eventListeners[t]||[]).filter(function(t){return t!==e})};e.prototype.unsubscribeAll=function(){this.eventListeners={};this.listeners=[]};e.prototype.trigger=function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(this.eventListeners[e]||[]).forEach(function(e){return e.apply(t,n)});this.listeners.forEach(function(r){return r.apply(t,[i({type:e},n)])})};return e}()},43:function(e,t,r){"use strict";(function(e){function r(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0});t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,r){i.super_.call(this,"E",e);Object.defineProperty(this,"lhs",{value:t,enumerable:!0});Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e);Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e);Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,r){s.super_.call(this,"A",e);Object.defineProperty(this,"index",{value:t,enumerable:!0});Object.defineProperty(this,"item",{value:r,enumerable:!0})}function c(e,t,r){var n=e.slice((r||t)+1||e.length);e.length=t<0?e.length+t:t;e.push.apply(e,n);return e}function l(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function u(e,t,r,n,d,p,f){d=d||[];f=f||[];var h=d.slice(0);if(void 0!==p){if(n){if("function"==typeof n&&n(h,p))return;if("object"==typeof n){if(n.prefilter&&n.prefilter(h,p))return;if(n.normalize){var y=n.normalize(h,p,e,t);if(y){e=y[0];t=y[1]}}}}h.push(p)}if("regexp"===l(e)&&"regexp"===l(t)){e=e.toString();t=t.toString()}var v=typeof e,g=typeof t,b="undefined"!==v||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(p),m="undefined"!==g||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(p);if(!b&&m)r(new o(h,t));else if(!m&&b)r(new a(h,e));else if(l(e)!==l(t))r(new i(h,e,t));else if("date"===l(e)&&e-t!=0)r(new i(h,e,t));else if("object"===v&&null!==e&&null!==t)if(f.filter(function(t){return t.lhs===e}).length)e!==t&&r(new i(h,e,t));else{f.push({lhs:e,rhs:t});if(Array.isArray(e)){var _;for(_=0;_<e.length;_++)_>=t.length?r(new s(h,_,new a(void 0,e[_]))):u(e[_],t[_],r,n,h,_,f);for(;_<t.length;)r(new s(h,_,new o(void 0,t[_++])))}else{var w=Object.keys(e),P=Object.keys(t);w.forEach(function(i,o){var a=P.indexOf(i);if(a>=0){u(e[i],t[i],r,n,h,i,f);P=c(P,a)}else u(e[i],void 0,r,n,h,i,f)});P.forEach(function(e){u(void 0,t[e],r,n,h,e,f)})}f.length=f.length-1}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||r(new i(h,e,t)))}function d(e,t,r,n){n=n||[];u(e,t,function(e){e&&n.push(e)},r);return n.length?n:void 0}function p(e,t,r){if(r.path&&r.path.length){var n,i=e[t],o=r.path.length-1;for(n=0;n<o;n++)i=i[r.path[n]];switch(r.kind){case"A":p(i[r.path[n]],r.index,r.item);break;case"D":delete i[r.path[n]];break;case"E":case"N":i[r.path[n]]=r.rhs}}else switch(r.kind){case"A":p(e[t],r.index,r.item);break;case"D":e=c(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function f(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,i=-1,o=r.path?r.path.length-1:0;++i<o;){void 0===n[r.path[i]]&&(n[r.path[i]]="number"==typeof r.path[i]?[]:{});n=n[r.path[i]]}switch(r.kind){case"A":p(r.path?n[r.path[i]]:n,r.index,r.item);break;case"D":delete n[r.path[i]];break;case"E":case"N":n[r.path[i]]=r.rhs}}}function h(e,t,r){if(r.path&&r.path.length){var n,i=e[t],o=r.path.length-1;for(n=0;n<o;n++)i=i[r.path[n]];switch(r.kind){case"A":h(i[r.path[n]],r.index,r.item);break;case"D":case"E":i[r.path[n]]=r.lhs;break;case"N":delete i[r.path[n]]}}else switch(r.kind){case"A":h(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=c(e,t)}return e}function y(e,t,r){if(e&&t&&r&&r.kind){var n,i,o=e;i=r.path.length-1;for(n=0;n<i;n++){void 0===o[r.path[n]]&&(o[r.path[n]]={});o=o[r.path[n]]}switch(r.kind){case"A":h(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}}function v(e,t,r){if(e&&t){u(e,t,function(n){r&&!r(e,t,n)||f(e,t,n)})}}var g,b,m=[];g="object"==typeof e&&e?e:"undefined"!=typeof window?window:{};b=g.DeepDiff;b&&m.push(function(){if(void 0!==b&&g.DeepDiff===d){g.DeepDiff=b;b=void 0}});r(i,n);r(o,n);r(a,n);r(s,n);Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:u,enumerable:!0},applyDiff:{value:v,enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:y,enumerable:!0},isConflict:{value:function(){return void 0!==b},enumerable:!0},noConflict:{value:function(){if(m){m.forEach(function(e){e()});m=null}return d},enumerable:!0}});t.a=d}).call(t,r(18))},45:function(e,t,r){"use strict";function n(e,t,r,n,i,o){var a=new FormData;switch(n){case"subtitle":a.append("srt",r);a.append("language",i.language);break;default:a.append("file",r)}var s=null,c=new Promise(function(r,i){s=Object(y.y)(b+"/website/"+e+"/video/"+t+"/type/"+n+"/upload",a,function(e){try{var t=JSON.parse(e.responseText),n=Object(g.a)(t);if(n){i(n);return}r(t)}catch(e){i("Failed to response upload video: "+e)}},function(){i("Failed upload video")},function(e){var t=Math.round(e.loaded/e.total*100);o&&o(t)})});c.xhr=s;return c}function i(e,t,r){return new Promise(function(n,i){Object(y.u)(b+"/website/"+e+"/video/"+t+"/type/"+r+"/list",function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){i(r);return}n(t)}catch(e){i()}},function(){i()})})}function o(e){return new Promise(function(t,r){Object(y.u)(b+"/task/"+e,function(e){try{var n=JSON.parse(e.responseText),i=Object(g.a)(n);if(i){r(i);return}t(n)}catch(e){r("Failed to response task: "+e)}},function(){r("Failed get task")})})}function a(e,t){return new Promise(function(r,n){var i=function i(a){t&&t(a);var s=a.items.status;"error"===s?n(a):"done"!==s?setTimeout(function(){return o(e).then(i)},1e3):r(a)};o(e).then(i,function(e){n(e)})})}function s(e,t){return new Promise(function(r,n){Object(y.u)(b+"/website/"+e+"/preset/"+t+"/list",function(e){try{var t=JSON.parse(e.responseText),i=Object(g.a)(t);if(i){n(i);return}r(t)}catch(e){n("Failed to response getPresetList: "+e)}},function(){n("Failed getPresetList")},!1)})}function c(e){return new Promise(function(t,r){Object(y.u)(b+"/video/"+e+"/website",function(e){try{var n=JSON.parse(e.responseText),i=Object(g.a)(n);if(i){r(i);return}t(n)}catch(e){r("Failed to response getWebsiteId: "+e)}},function(){r("Failed getWebsiteId")},!1)})}function l(e,t){return new Promise(function(r,n){Object(y.u)(b+"/website/"+e+"/video/"+t,function(e){try{var t=JSON.parse(e.responseText),i=Object(g.a)(t);if(i){n(i);return}r(t)}catch(e){n("Failed to response getWebsiteId: "+e)}},function(){n("Failed getWebsiteId")},!1)})}function u(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"production";return new Promise(function(o,a){Object(y.u)(b+"/website/"+e+"/video/"+t+"/type/"+n+"/"+r+"/set-"+i,function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){a(r);return}o(t)}catch(e){a("Failed to response getGroupList: "+e)}},function(){a("Failed set-production")},!1,"POST")})}function d(e,t,r){return new Promise(function(n,i){Object(y.u)(b+"/website/"+e+"/video/"+t+"/edit",function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){i(r);return}n(t)}catch(e){i("Failed to response editVideoSlot: "+e)}},function(){i("Failed editVideoSlot")},!1,"POST",r)})}function p(e,t){return b+"/data/"+e+"/type/video/"+t+"/vast"}function f(e,t){return new Promise(function(r,n){Object(y.u)(p(e,t),function(e){var t=e.responseXML,i=t.querySelector('MediaFile[type="image/jpeg"]');if(i){var o=Object(y.m)(i);r(o)}else n("Failed get image")},function(){n("Failed get image")},"text/xml")})}function h(e,t){return new Promise(function(r,n){Object(y.u)(p(e,t),function(e){var t=e.responseXML;t?r(t):n("Failed get subtitles")},function(){n("Failed get subtitles")},"text/xml")})}t.s=n;t.f=i;t.r=a;t.h=s;t.m=c;t.l=l;t.q=u;t.d=d;t.i=f;t.k=h;r.d(t,"j",function(){return m});r.d(t,"t",function(){return _});r.d(t,"b",function(){return w});r.d(t,"a",function(){return P});r.d(t,"p",function(){return O});r.d(t,"u",function(){return k});r.d(t,"n",function(){return j});r.d(t,"c",function(){return S});r.d(t,"o",function(){return E});r.d(t,"g",function(){return T});r.d(t,"e",function(){return x});var y=r(4),v=r(13),g=r(46),b=v.a.baseUrl,m=function(e,t,r){return new Promise(function(n,i){var o=location.href,a=(new Date).getTimezoneOffset();Object(y.u)(Object(y.b)(b+"/stats/video/"+r+"/average",{date_from:e,date_to:t,video_id:r,uri:o,time_zone:a}),function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){i(r);return}n(t)}catch(e){i("Failed to response task: "+e)}},function(){i("Failed get task")})})},_=function(e,t,r){return new Promise(function(n,i){Object(y.u)(b+"/website/"+e+"/video/"+t+"/type/video/upload",function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){i(r);return}n(t)}catch(e){i("Failed to response upload video: "+e)}},function(){i("Failed upload video")},!1,"POST",{url:r})})},w=function(e){return new Promise(function(t,r){Object(y.u)(b+"/website/"+e+"/video/create/",function(e){try{var n=JSON.parse(e.responseText),i=Object(g.a)(n);if(i){r(i);return}t(n)}catch(e){r("Failed to response createVideoSLot: "+e)}},function(){r("Failed createVideoSLot")},!1,"POST")})},P=function(e,t,r,n){return new Promise(function(i,o){Object(y.u)(b+"/website/"+e+"/video/"+t+"/type/video/"+r+"/filters/apply",function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){o(r);return}i(t)}catch(e){o("Failed to response applyFilters: "+e)}},function(){o("Failed applyFilters")},!1,"POST",n)})},O=function(e,t,r){return new Promise(function(n,i){Object(y.u)(b+"/website/"+e+"/video/"+t+"/type/video/duplicate",function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){i(r);return}n(t)}catch(e){i("Failed to response setDublicate: "+e)}},function(){i("Failed setDublicate")},!1,"POST",r)})},k=function(e){return new Promise(function(t,r){Object(y.u)(b+"/user/edit",function(e){try{var n=JSON.parse(e.responseText),i=Object(g.a)(n);if(i){r(i);return}t(n)}catch(e){r("Failed to response getDublicates: "+e)}},function(){return r("Failed edit user")},!1,"POST",e)})},j=function(e,t,r,n){return new Promise(function(i,o){Object(y.u)(b+"/website/"+e+"/video/"+t+"/type/video/"+r+"/make_subtitles",function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){o(r);return}i(t)}catch(e){o("Failed to response make subtitles: "+e)}},function(){return o("Failed make subtitles")},!1,"POST",n)})},S=function(e,t,r,n){return new Promise(function(i,o){Object(y.u)(b+"/website/"+e+"/video/"+t+"/type/subtitle/"+r+"/edit",function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){o(r);return}i(t)}catch(e){o("Failed to response update subtitles: "+e)}},function(){return o("Failed update subtitles")},!1,"POST",{text:n})},!1,"POST",{text:n})},E=function(e,t,r,n){return new Promise(function(i,o){Object(y.u)(b+"/website/"+e+"/video/"+t+"/type/"+r+"/"+n+"/remove",function(e){try{var t=JSON.parse(e.responseText),r=Object(g.a)(t);if(r){o(r);return}i(t)}catch(e){o("Failed to response remove file: "+e)}},function(){return o("Failed remove file")})})},T=function(e,t){return new Promise(function(r){Object(y.u)(b+"/data/"+e+"/type/video/"+t+"/metadata",function(e){var t=JSON.parse(e.responseText).items[0];r(t.mediaFiles)})})},x=function(e,t,r,n){return new Promise(function(r,i){Object(y.u)(b+"/website/"+e+"/video/"+t+"/save_as",function(e){try{var t=JSON.parse(e.responseText),n=Object(g.a)(t);if(n){i(n);return}r(t)}catch(e){i("Failed to response duplicateVideo: "+e)}},function(){i("Failed to response duplicateVideo")},!1,"POST",n)})}},46:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=(r(13),function(e){var t=e.status,r=e.message;return"error"===t&&(Array.isArray(r)?r.join("\n"):r)})},49:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(38),s=r.n(a),c=r(50);t.a=new(function(e){function t(){n(this,t);var o=i(this,e.call(this)),a=r(51).version;o.baseUrl="//api.viqeo.tv/v1";o.statsUrl="//stats.viqeo.tv";o.staticUrl="//cdn.viqeo.tv/js";o.playerHomeUrl="https://viqeo.tv";o.personalUrl="https://viqeo.tv/personal/";o.statsScriptUrl=o.staticUrl+"/"+s.a.stats+".js?v="+a;o.editorScriptUrl=o.staticUrl+"/"+s.a.editor+".js?v="+a;o.playerScriptUrl=o.staticUrl+"/"+s.a.player+".js?v="+a;o.initInternalPlayerUrl=o.staticUrl+"/"+s.a.initInternalPlayer+".js";o.galleryScriptUrl=o.staticUrl+"/"+s.a.gallery+".js?v="+a;o.embedUrl="https://cdn.viqeo.tv";o.advertUrl="";o.errorTrackerUrl="http://error.viqeo.tv";return o}o(t,e);return t}(c.a))},50:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function e(){n(this,e);this.baseUrl="";this.statsUrl="";this.staticUrl="";this.playerHomeUrl="";this.personalUrl="";this.statsScriptUrl="";this.editorScriptUrl="";this.playerScriptUrl="";this.initInternalPlayerUrl="";this.galleryScriptUrl="";this.embedUrl="";this.advertUrl="";this.errorTrackerUrl="";this.advertModuleUrl=""}},51:function(e,t){e.exports={name:"viqeo-player",version:"0.2.72",main:"lib/index.js",scripts:{"watch player":"./node_modules/.bin/cross-env SERVER=local NODE_ENV=development ./node_modules/.bin/webpack --watch --config ./internals/webpack.config.debug.js","build player":"NODE_ENV=production ./node_modules/.bin/webpack","watch plugin":"./node_modules/.bin/cross-env SERVER=plugin NODE_ENV=development ./node_modules/.bin/webpack --watch --config ./internals/webpack.config.plugin.js",eslint:"eslint --ext .jsx,js src",stylelint:"stylelint src/**/*.css","start manual server test":"node ./tests/manual/","test:single":"rm -rf tmp/ && ./node_modules/.bin/karma start karma.conf.js --single-run","test:watch":"karma start karma.conf.js"},"pre-commit":["eslint"],keywords:["videonow","viqeo","test1"],license:"UNLICENSED",private:!0,dependencies:{"babel-core":"6.25.0","babel-loader":"7.1.1","babel-plugin-transform-helper":"0.0.6","babel-plugin-transform-object-rest-spread":"6.23.0","babel-preset-latest":"6.24.1","babel-runtime":"6.25.0","chart.js":"^2.7.2","cross-env":"3.2.4",pug:"^2.0.0-rc.4","raw-loader":"0.5.1","rc-slider":"^8.2.0","react-dropzone":"^4.1.2","react-redux-i18n":"^1.8.0","react-select":"^1.0.0-rc.5","strip-loader":"0.1.2",svgo:"0.7.2","svgo-loader":"1.2.1","throttle-debounce":"^1.0.1",webpack:"3.4.1","xml-js":"^1.5.1"},devDependencies:{autoprefixer:"^7.1.2","babel-plugin-add-module-exports":"^0.2.1","babel-preset-react":"^6.24.1","copy-webpack-plugin":"^4.0.1","css-loader":"^0.28.4",dashjs:"^2.9.0","deep-diff":"^0.3.8",eslint:"4.3.0","eslint-config-airbnb-base":"11.3.1","eslint-import-resolver-webpack":"0.8.3","eslint-plugin-import":"2.7.0","eslint-plugin-jasmine":"^2.10.1","eslint-plugin-jsx-a11y":"^6.0.2","eslint-plugin-react":"^7.0.1",express:"^4.15.3","file-loader":"^0.11.2","jasmine-core":"^3.1.0",karma:"^2.0.2","karma-browserstack-launcher":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-jasmine":"^1.1.2","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-phantomjs-launcher":"^1.0.4","karma-webpack":"^3.0.0","material-ui":"^0.19.4",mocha:"^5.2.0","phantomjs-prebuilt":"^2.1.16","postcss-icss-values":"^2.0.1","postcss-loader":"^2.0.6","pre-commit":"^1.2.2","raw-loader":"^0.5.1",react:"^16.2.0","react-click-outside":"^2.3.1","react-color":"^2.13.8","react-dom":"^16.2.0","react-redux":"^5.0.5",redux:"^3.7.2","redux-devtools-extension":"^2.13.2","redux-thunk":"^2.2.0","style-loader":"^0.18.1",stylelint:"^8.0.0","stylelint-config-standard":"^17.0.0","svg-url-loader":"^2.1.1","viqeo-authorization":"git+ssh://git@bitbucket.org/videonow/viqeo-authorization.git#v0.0.7","viqeo-filters":"git+ssh://git@bitbucket.org/videonow/viqeo-image-filters.git#0.0.8","viqeo-front-common":"git+ssh://git@bitbucket.org/videonow/viqeo-front-common.git#v0.0.10","webpack-conditional-loader":"^1.0.12",ws:"2.2.1"},browserslist:["Chrome >= 20","Firefox >= 24","Edge >= 12","Explorer >= 10","iOS >= 5","Safari >= 5","Android >= 2.3","Opera >= 15"],engines:{node:"6",npm:"3"}}},58:function(e,t,r){"use strict";var n=r(3),i=r(9),o=r(129),a=r.n(o),s=r(130),c=r.n(s);t.a=function(e,t){var r=Object(n.c)(e,"div",{position:"absolute",width:"100%",height:"100%",bottom:0,left:0,zIndex:10},""+a.a+(t||c.a));r.firstElementChild.style.display="block";r.lastElementChild.style.display="none";if(!i.f){e.addEventListener("mouseenter",function(){r.lastElementChild.style.display="block"});e.addEventListener("mouseleave",function(){r.lastElementChild.style.display="none"})}Object(n.d)(r.firstElementChild,{position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"});Object(n.d)(r.lastElementChild,{position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"});return e}},60:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function(){function e(t){n(this,e);this.viqeo=t;this._functionSubscibes=[];this._eventsList=[]}e.prototype.subscribeTracking=function(e,t){this._functionSubscibes.push(e);this.viqeo.subscribeTracking(e,t)};e.prototype.addEvent=function(e,t,r){this._eventsList.push({el:e,name:t,callback:r});e.addEventListener(t,r)};e.prototype.destroy=function(){var e=this;this._functionSubscibes.forEach(function(t){return e.viqeo.unsubscribeTracking(t)});this._eventsList.forEach(function(e){e.el.removeEventListener(e.name,e.callback)})};return e}()},69:function(e,t,r){"use strict";t.a={extPlayer:"extPlayer",stdPlayer:"stdPlayer",recommendPlayer:"recommendPlayer",recomendVmodePlayer:"recommendVmode",vmodePlayer:"vmode",viqeoPersonlaPlayer:"viqeoPersonalPlayer"}},845:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(13),o=r(21),a=r(846),s=window,c=s.opera,l=navigator,u=l.userAgent,d=l.vendor;o.a.log("Url: "+location.href+", UserAgent: "+(u||d||c));if(!window.VIQEO||!window.VIQEO.run){var p=window.onerror;window.onerror=function(e,t,r,o,a){p&&p(e,t,r,o,a);if(-1!==t.indexOf(i.a.staticUrl)){var s={code:101,message:a?a.toString():e,referer:location.href,sourceUrl:t,row:r,column:o};Object(n.u)(i.a.errorTrackerUrl,!1,!1,!1,"POST",s)}};window.VIQEO=new a.a;var f=window.onViqeoLoad||[];"function"==typeof f&&(f=[f]);f.forEach(function(e){return e(window.VIQEO)})}document.body?setTimeout(function(){return window.VIQEO.run()},0):document.addEventListener("DOMContentLoaded",function(){return window.VIQEO.run()})},846:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(21),s=r(416),c=r(847),l=r(848),u=r(849),d=r(417),p=r(850),f=r(69),h="Init";t.a=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var o=i(this,e.call(this,r));a.a.log(h+".constructor("+JSON.stringify(r)+")");p.a.forEach(function(e){return new e(o)});o.playersManager=new d.a;o._recommendationLayout=new l.a({playersManager:o.playersManager,type:f.a.recommendPlayer});o._standartLayout=new c.a({playersManager:o.playersManager,type:f.a.stdPlayer});o._externalLayout=new u.a({playersManager:o.playersManager,type:f.a.extPlayer});o._layouts=[o._standartLayout,o._recommendationLayout,o._externalLayout];o._layouts.forEach(function(e){return e.subscribe(o._triggerTracking.bind(o),"Tracking")});o.playersManager.subscribe(o._triggerTracking.bind(o),"Tracking");o.initPersonal={callPlayerMethod:function(e,t,r){o.getPlayers().forEach(function(n){n.getSlotId()===e&&n[t].apply(n,r)})}};return o}o(t,e);t.prototype.run=function(){a.a.log(h+".run()");this._layouts.forEach(function(e){return e.run()})};t.prototype.start=function(e){a.a.log(h+".start("+JSON.stringify(e)+")");this._externalLayout.start(e)};t.prototype.getPlayers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{container:[f.a.stdPlayer,f.a.extPlayer,f.a.recommendPlayer]},t=e.container,r=t;Array.isArray(t)||(r=[t]);var n=[];this._layouts.forEach(function(e){-1!==r.indexOf(e._type)&&(n=n.concat(e.getPlayers()))});return n};t.prototype.getPlayerBy=function(e){a.a.log(h+".getPlayers("+e+")");var t=this.getPlayers(),r=e;"string"==typeof e&&(r=document.querySelector(e));for(var n=void 0,i=0;i<t.length;i+=1){n=t[i];if(r.contains(n.getParent()))break;n=null}return n};t.prototype.setConfig=function(e){a.a.log(h+".setConfig("+JSON.stringify(e)+")");this._triggerTracking({eventName:"ConfigUpdated",options:e})};return t}(s.a)},847:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(4),s=r(13),c=r(21),l=r(3),u=r(208),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(r){n(this,t);var o=i(this,e.call.apply(e,[this].concat(r)));window.addEventListener("message",o._handleGetMessage.bind(o));return o}o(t,e);t.prototype._handleGetMessage=function(e){var r=e.data,n=e.origin,i=s.a.embedUrl||"*";i=i.replace(/(^\w+:|^)\/\//,"");if(n.replace(/(^\w+:|^)\/\//,"")===i){c.a.log("StandardPlayerLayout._handleGetMessage("+JSON.stringify({data:r,origin:n})+")");var o=JSON.parse(r),a=o.npvid;this._ids[a].frameData=o;this._ids[a].elements.forEach(function(e){var r=e.mark;return Object(l.d)(r,t.getIframeStyles(o,r.parentNode))});this.trigger("Tracking",{eventName:"Init:IframeLoaded",data:o,container:this._type});this.createPlayers()}};t.getIframeStyles=function(e,t){var r=e.vqPlayback,n=e.mediaFiles,i={option:{type:"video"}},o=r?r.find(function(e){return"aspect"===e.option.id})||i:i,a=9/16;if(n)for(var s=0;s<n.length;s+=1){var c=n[s],l=c.type,u=c.width,d=c.height;if("video/mp4"===l){a=d/u;break}}var p=o.option.type;if("smart"===p){p="video";a>1&&window.innerWidth>window.innerHeight&&(p="square")}switch(p){case"square":return{paddingBottom:Math.ceil(100)+"%"};case"custom":var f=o.option,u=f.width,d=f.height;return{width:u+"px",height:d+"px",paddingBottom:"0%"};case"container":return{width:t.offsetWidth,height:t.offsetHeight,paddingBottom:"0%"};case"16/9":return{paddingBottom:Math.ceil(56.25)+"%"};case"9/16":return{paddingBottom:Math.ceil(16/9*100)+"%"};case"4/3":return{paddingBottom:Math.ceil(75)+"%"};default:return{paddingBottom:Math.ceil(100*a)+"%"}}};t.prototype._requestIframeData=function(e,t){var r=this;if(!this._ids[t].frameData){e.contentWindow.postMessage("requestData","*");setTimeout(function(){r._requestIframeData(e,t)},100)}};t.replaceOldStarter=function(e){var t=e.querySelectorAll("script[data-vnd]");Array.from(t).forEach(function(e){var t=document.createElement("div");t.className+="viqeo-embed";t.setAttribute("data-vnd",e.getAttribute("data-vnd"));t.setAttribute("data-profile",e.getAttribute("data-profile"));var r=document.createElement("iframe");r.src=s.a.embedUrl+"/embed/?vid="+e.getAttribute("data-vnd");r.allowFullscreen=!0;t.appendChild(r);Object(l.d)(t,{display:"none"});e.parentNode.insertBefore(t,e);Object(l.p)(e)})};t.prototype.findElements=function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;t.replaceOldStarter(r);var n=r.querySelectorAll(".viqeo-embed[data-vnd]");n.length||"viqeo-embed"!==r.className||(n=[r]);n.length&&(this._profileId=n[0].getAttribute("data-profile"));this.parseIds(n,"data-vnd");Array.from(n).forEach(function(t){var r=t.getAttribute("data-vnd");e._requestIframeData(t.querySelector("iframe"),r)});var i=this.getNotLoadedIds();if(i.length){c.a.log("StandardPlayerLayout Founded ids="+JSON.stringify(i));this.loadData().then(this.dataLoaded.bind(this))}this.createPlayers()};t.prototype.dataLoaded=function(e){var t=this,r=e.role;e.players.forEach(function(e){t._ids[e.requestedParam].initData=d({},e);t._ids[e.requestedParam].elements.forEach(function(n){var i=n.getPlayer;i&&i.then(function(n){n.loadInit(d({},e,{data:t._ids[e.requestedParam].frameData}));"editor"===r&&n.forceResize()})})})};t.prototype.getPlayer=function(e){return this.playersManager.createPlayer(d({},e))};t.prototype.getUrl=function(){var e=this.getNotLoadedIds(),t=this._profileId;return Object(a.b)(s.a.baseUrl+"/data/startup",{video:e,profile:t,referer:u.a.getReferer(),title:document.title})};return t}(u.a)},848:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(4),s=r(13),c=r(21),l=r(208),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(){n(this,t);return i(this,e.apply(this,arguments))}o(t,e);t.prototype.findElements=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=e.querySelectorAll(".viqeo-embed[data-playerId]");t.length&&(this._profileId=t[0].getAttribute("data-profile"));this.parseIds(t,"data-playerId");var r=this.getNotLoadedIds();if(r.length){c.a.log("RecommendationPlayerLayout Founded ids="+JSON.stringify(r));this.loadData().then(this.dataLoaded.bind(this))}this.createPlayers()};t.prototype.getPlayer=function(e){return this.playersManager.createPlayer(u({},e,{options:{hideEditor:!0},playerId:e.requestedParam}))};t.prototype.dataLoaded=function(e){var t=this;e.players.forEach(function(e){t._ids[e.requestedParam].frameData=e.data;t._ids[e.requestedParam].initData=u({},e)});this.createPlayers()};t.prototype.getUrl=function(){var e=this.getNotLoadedIds(),t=this._profileId;return Object(a.b)(s.a.baseUrl+"/data/startup",{playerId:e,profile:t,referer:l.a.getReferer(),title:document.title})};return t}(l.a)},849:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(38),s=r.n(a),c=r(13),l=r(21),u=r(4),d=r(208),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(){n(this,t);return i(this,e.apply(this,arguments))}o(t,e);t.prototype.start=function(e){var t=e.players,r=document.querySelector('script[src*="'+s.a.initExternalPlayer+'"]'),n=r.getAttribute("data-profile"),i=r.getAttribute("data-playerId");t.forEach(function(e,r){var o=e.videoSrc,a=e.previewSrc,s=e.selector,c=document.createElement("div");c.className="viqeo-external_player";var l={videoSrc:o,previewSrc:Object(u.w)(a),playerId:i,profile:n};Object.keys(l).forEach(function(e){l[e]&&c.setAttribute("data-"+e,l[e])});c.setAttribute("data-original",JSON.stringify(t[r]));var d=document.querySelector(s);d&&d.appendChild(c)});this.run()};t.prototype.parseIds=function(e,t){var r=this;Array.from(e).forEach(function(e){var n=e.getAttribute(t),i=Object(u.r)(n),o=n;i&&(o=i[0].url);r._ids[o]||r._createEmptyId(o);r._ids[o].elements.find(function(t){return t.mark===e})||r._ids[o].elements.push({mark:e,getPlayer:null})})};t.prototype.findElements=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=document.querySelectorAll(".viqeo-external_player");t.length||"viqeo-external_player"!==e.className||(t=[e]);if(t.length){this._profileId=t[0].getAttribute("data-profile");this._playerId=t[0].getAttribute("data-playerId")}Array.from(t).forEach(function(e){e.setAttribute("data-videoSrc",Object(u.w)(e.getAttribute("data-videoSrc")))});this.parseIds(t,"data-videoSrc");var r=this.getNotLoadedIds();if(r.length){l.a.log("ExternalPlayerLayout Founded ids="+JSON.stringify(r));this.loadData().then(this.dataLoaded.bind(this))}this.createPlayers()};t.prototype.dataLoaded=function(e){var t=this,r=e.preload;e.players.forEach(function(e){t._ids[e.requestedParam].frameData=e.data;t._ids[e.requestedParam].initData=p({},e,{preload:r})});this.createPlayers()};t.prototype.getPlayer=function(e,t){var r=t.getAttribute("data-original");r&&(r=JSON.parse(r));return this.playersManager.createPlayer(p({},e,{profileId:this._profileId,options:{disableVideoCors:!0,preload:e.preload,hideEditor:!0},paramsForGlobalEvent:{originalParams:r}}))};t.prototype.getUrl=function(){return Object(u.b)(c.a.baseUrl+"/data/startup")};t.prototype.getValuesForRequest=function(){var e=this,t={profile:this._profileId,referer:d.a.getReferer(),externalVideos:[],title:document.title};this._playerId&&(t.playerId=[this._playerId]);this.getNotLoadedIds().forEach(function(r){var n=e._ids[r].elements,i=n.length>0?n[0].mark:null;if(i){var o=i.getAttribute("data-previewSrc"),a=i.getAttribute("data-videoSrc"),s=Object(u.r)(i.getAttribute("data-videoSrc")),c={videoSrc:s||a};o&&(c.previewSrc=o);t.externalVideos.push(c)}});return t};return t}(d.a)},850:function(e,t,r){"use strict";var n=r(851),i=r(852),o=r(415);t.a=[n.a,i.a,r(854).a,o.a,r(855).a,r(856).a]},851:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(4),s=r(13),c=r(21),l=r(60),u=r(29),d="PageRollController";t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._startAdvertAfter=null;o._startAdvertRelative=null;o._videoGalleryOpened=!1;o._initAdvertLoad=null;o._players=[];o._hasMultipleAdvert=!1;o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){this.subscribeTracking(this._startupLoaded.bind(this),"Init:StartupDataLoaded");this.subscribeTracking(this._startTimer.bind(this),{eventName:["Player:started","Player:played","Player:replayed"]});this.subscribeTracking(this._onVideoGalleryShow.bind(this),"VideoGallery:Opened");this.subscribeTracking(this._onVideoGalleryHide.bind(this),"VideoGallery:Hidden");this.subscribeTracking(this._onPlayerAdded.bind(this),"Player:added");this.subscribeTracking(this._onAdvertLoaded.bind(this),"Player:advLoaded")};t.prototype._onAdvertLoaded=function(e){this._players.find(function(t){return e.player===t.player}).hasAdvertLoaded=!0};t.prototype._onPlayerAdded=function(e){this._players.push({player:e.player,container:e.container,hasAdvertInit:!1,hasAdvertStart:!1,hasAdvertLoaded:!1,hasTriggered:!1,time:0})};t.prototype._requestAdvert=function(){var e=this,t=this._getActivePlayer(),r=this._players.find(function(e){return t===e.player});r.hasAdvertInit||this._initAdvertLoad.then(function(n){var i=e._players.find(function(e){return e.hasAdvertStart});if((e._hasMultipleAdvert||!i)&&t===e._getActivePlayer()){r.hasAdvertInit=!0;t.initAdvert(n)}})};t.prototype._startAdvert=function(){var e=this,t=this._getActivePlayer(),r=this._players.find(function(e){return t===e.player});r.hasAdvertStart||this._initAdvertLoad.then(function(){var n=e._players.find(function(e){return e.hasAdvertStart});if((e._hasMultipleAdvert||!n)&&t===e._getActivePlayer()){if(r.hasAdvertLoaded){r.hasAdvertStart=!0;t.startAdvert()}if(!r.hasTriggered){r.hasTriggered=!0;t.trigger("advStart")}}})};t.prototype._getActivePlayer=function(){return this.viqeo.getPlayers().find(function(e){return e.hasVisible()})};t.prototype._startTimer=function(){var e=this;this._timer||(this._timer=setInterval(function(){for(var t=e._getActivePlayer(),r=e._players.find(function(e){return e.player===t}),n=0,i=0;i<e._players.length;i+=1)n+=e._players[i].time;if(e._initAdvertLoad&&!e._videoGalleryOpened&&t){r.time+=1;if(e._hasMultipleAdvert){r.time>=3&&e._requestAdvert();r.time>=e._startAdvertAfter&&e._startAdvert()}else{n>=3&&e._requestAdvert();t.getCurrentTime()>e._getPaddingTime()&&t.getDuration()-t.getCurrentTime()>e._getPaddingTime()&&n>=e._getStartTime()&&e._startAdvert()}}},1e3))};t.prototype._getPaddingTime=function(){return this._startAdvertAfter>=this._getAllPlayerDuration()?0:2};t.prototype._getStartTime=function(){var e=this._getActivePlayer(),t=this._getAllPlayerDuration();if(e&&this._startAdvertAfter>=t)return e.getDuration()-2;var r=t*this._startAdvertRelative;return Math.min(r,120)<this._startAdvertAfter?this._startAdvertAfter:r};t.prototype._clearTimer=function(){clearInterval(this._timer);this._timer=!1};t.prototype._getAllPlayerDuration=function(){var e=this.viqeo.getPlayers(),t=0;e.forEach(function(e){t+=e.getDuration()});return t};t.prototype._startupLoaded=function(e){var t=e.data,r=t.pageRollAdvert,n=void 0===r?{}:r,i=n.url,o=n.startAdvertAfter,l=n.startAdvertRelative,u=n.hasMultipleAdvert,p=s.a.advertUrl||i;this._startAdvertAfter=o||15;this._startAdvertRelative=l||0;this._hasMultipleAdvert=u;p?this._initAdvertLoad=new Promise(function(e,t){c.a.time(d+" loadAdvert("+p+")");Object(a.u)(p,function(r){c.a.timeEnd(d+" loadAdvert("+p+")");try{var n=JSON.parse(r.responseText),i=n[0];Object(a.o)(s.a.advertModuleUrl||i.url,function(){return e(i)},t);c.a.log(d+" Advert loaded: "+r.responseText)}catch(e){t(e)}},t)}):this._destroy()};t.prototype._onVideoGalleryShow=function(){this._videoGalleryOpened=!0};t.prototype._onVideoGalleryHide=function(){this._videoGalleryOpened=!1;this.viqeo.getPlayers().find(function(e){return e.inStatus([u.a.STARTED,u.a.PLAYED,u.a.REPLAYED])})&&this._startTimer()};t.prototype._destroy=function(){e.prototype.destroy.call(this);this._clearTimer()};return t}(l.a)},852:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(3),s=r(4),c=r(9),l=r(96),u=r(853),d=r.n(u),p=r(15),f=r(60),h=r(69),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g={floatingRight:"3%",floatingBottom:"4%"};t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._config={floatingWidth:230,floatingTop:"",floatingRight:"",floatingBottom:"",floatingLeft:"",playerNumber:0,playerDesktopFactor:.25,playerMobileFactor:.25,floatingTranslateX:0,floatingTranslateY:0,slotBackground:"",enableCloseButton:!0};o._flyPlayer=null;o._hasCollapsed=!1;o._hasVisible=!1;o._configLoaded=!1;o._players=[];o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){this.subscribeTracking(this._checkConfig.bind(this),"ConfigUpdated");this.subscribeTracking(this._playerAdded.bind(this),{eventName:"Player:added",container:[h.a.stdPlayer,h.a.extPlayer,h.a.recommendPlayer]});this.subscribeTracking(this._visibilityChanged.bind(this),"Player:visibilityChanged");this.subscribeTracking(this._advStarted.bind(this),"Player:advStarted");this.subscribeTracking(this._advEnded.bind(this),"Player:advEnded");this.addEvent(window,"scroll",this._onScroll.bind(this));this.addEvent(window,"resize",this._onResize.bind(this))};t.prototype._advEnded=function(e){var t=e.player;this._players.find(function(e){return e.player===t}).hasAdvertProgress=!1;if(this._flyPlayer){var r=this._flyPlayer.getWrapper(),n=r.querySelector(".flyPlayer_close");n&&Object(a.d)(n,{display:"block"})}};t.prototype._advStarted=function(e){var t=e.player;this._players.find(function(e){return e.player===t}).hasAdvertProgress=!0;if(this._flyPlayer){var r=this._flyPlayer.getWrapper(),n=r.querySelector(".flyPlayer_close");n&&Object(a.d)(n,{display:"none"})}};t.prototype._onResize=function(){var e=this._flyPlayer;if(e&&this._hasCollapsed){var t=e.getParent(),r=t.offsetWidth;Object(a.d)(t,{width:r+"px",height:""+r*e.getVideoSlotAspect()})}};t.prototype._createCloseButton=function(e){var t=this,r=e.getWrapper(),n=Object(l.a)(d.a,Object(a.c)(r,"div",{position:"absolute",top:"-13px",right:"-13px",width:"26px",height:"26px",zIndex:100}),function(){t._expand(e);t.destroy()});n.classList.add("flyPlayer_close");return n};t.prototype._collapse=function(e){var t=this._config,r=t.floatingWidth,n=t.floatingTop,i=t.floatingRight,o=t.floatingBottom,c=t.floatingLeft,l=t.slotBackground,u=t.floatingTranslateX,d=t.floatingTranslateY,f=t.enableCloseButton,h=e.getParent(),y=e.getWrapper(),v=e.getSize(),g=v.height,b=v.width;e.startFly();Object(a.d)(h,{width:""+b,height:g+"px",background:l});e.resizeAd(r,r*e.getVideoSlotAspect());Object(a.d)(y,{boxShadow:"0 0 10px #000",position:"fixed",opacity:0,top:Object(s.p)(n),right:Object(s.p)(i),bottom:Object(s.p)(o),left:Object(s.p)(c),transform:"translate("+Object(s.p)(u)+", "+Object(s.p)(d)+")",zIndex:p.a.flyPlayer,fontSize:0,lineHeight:0});setTimeout(function(){Object(a.d)(y,{opacity:1,transition:"opacity 2s"})},0);if(f){var m=y.querySelector(".flyPlayer_close");m||(m=this._createCloseButton(e));this._players.find(function(t){return t.player===e}).hasAdvertProgress?Object(a.d)(m,{display:"none"}):Object(a.d)(m,{display:"block"})}this._hasCollapsed=!0};t.prototype._expand=function(e){var t=e.getParent(),r=e.getWrapper();e.endFly();Object(a.d)(r,{position:"",transition:"",opacity:1,top:0,right:0,bottom:0,left:0,transform:"translate(0, 0)",boxShadow:"none"});var n=r.querySelector(".flyPlayer_close");n&&Object(a.d)(n,{display:"none"});e.forceResize();Object(a.d)(t,{width:"100%",height:"100%"});this._hasCollapsed=!1};t.prototype._onScroll=function(){if(this._flyPlayer&&this._hasVisible){var e=Object(a.j)(this._flyPlayer.getParent()),t=this._config,r=t.playerDesktopFactor,n=t.playerMobileFactor,i=c.f?n:r;!this._hasCollapsed&&this._flyPlayer.getVisible()<=i?this._collapse(this._flyPlayer):this._hasCollapsed&&e>=i&&this._expand(this._flyPlayer)}};t.prototype._visibilityChanged=function(e){var t=e.player;this._flyPlayer&&this._flyPlayer===t&&!this._hasVisible&&(this._hasVisible=this._flyPlayer.hasVisible())};t.prototype._playerAdded=function(e){this._players.push({player:e.player,hasAdvertProgress:!1});this._run()};t.prototype._checkConfig=function(e){var t=e.options,r=t.flyPlayer;r&&(this._configLoaded=!0);"object"===(void 0===r?"undefined":v(r))?this._config=y({},this._config,r):"boolean"==typeof r&&(this._config=y({},this._config,g));this._run()};t.prototype._run=function(){if(this._configLoaded&&!this._flyPlayer){var e=this._config.playerNumber,t=this.viqeo.getPlayers({container:[h.a.stdPlayer,h.a.recommendPlayer,h.a.extPlayer]}),r=t[e];if(r){this._flyPlayer=r;this._hasVisible||(this._hasVisible=this._flyPlayer.hasVisible())}}};return t}(f.a)},853:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24">\n  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="white"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},854:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(4),s=r(29),c=r(13),l=r(60),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d=.5,p=[3,5,10,15,20,30,60,90,120,180,300,600,1200];t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._queueEvents=[];o._trackerParams=null;o._playerTrackerParams={};o._data=[];o._players={};o._events=[{playerName:"Player:galleryStarted",trackingName:"fullscreen"},{playerName:"Player:paused",trackingName:"pause"},{playerName:"Player:played",trackingName:"resume"},{playerName:"Player:rewind",trackingName:"rewind"},{playerName:"Player:started",trackingName:"start"},{playerName:"Player:ended",trackingName:o._videoEnded.bind(o)},{playerName:"Player:replayed",trackingName:"replay"},{playerName:"Player:started",trackingName:"impression"},{playerName:"Player:firstShowing",trackingName:"visible"},{playerName:"Player:advStarted",trackingName:"adv"},{playerName:"Player:userAction",trackingName:o._userActionTracking.bind(o)},{playerName:"Player:currentTimeUpdated",trackingName:o._currentTimeUpdated.bind(o)}];setInterval(o._checkTime.bind(o),1e3*d);o.subscribeTracking(o._eventTriggered.bind(o));o.subscribeTracking(o._startupLoaded.bind(o),"Init:StartupDataLoaded");o.subscribeTracking(o._playerAdded.bind(o),"Player:added");o.subscribeTracking(o._playerDestroyed.bind(o),"Player:destroyed");o.subscribeTracking(o._slotIdUpdated.bind(o),"Player:slotIdUpdated");return o}o(t,e);t.prototype._playerAdded=function(e){var t=e.player,r=e.container,n=t.getSlotId();this._players[n]||(this._players[n]={player:t,firstQuartile:!1,midpoint:!1,thirdQuartile:!1,complete:!1,lastTime:0});this._data.push({player:t,container:r,currentTime:0,lastTime:0})};t.prototype._slotIdUpdated=function(e){var t=this,r=e.player,n=r.getSlotId(),i=Object.keys(this._players).find(function(e){return t._players[e].player===r});i&&(this._players[n]=this._players[i])};t.prototype._playerDestroyed=function(e){for(var t=e.player,r=0;r<this._data.length;r+=1)this._data[r].player===t&&this._data.splice(r,1)};t.prototype._startupLoaded=function(e){var t=this,r=e.data,n=r.trackingParams,i=r.players;this._trackerParams=n;i.forEach(function(e){var r=e.requestedParam,n=e.data,i=e.trackingParams;t._playerTrackerParams[n?n.npvid:r]=i});this._queueEvents.forEach(function(e){t.send(e)})};t.getReferer=function(){var e=document.querySelector('meta[property="og:url"]');return e?Object(a.w)(e.content):location.href};t.normalizeValue=function(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})};t.normalizeDataForServer=function(e){var r={};Object.keys(e).forEach(function(n){r[t.normalizeValue(n)]=e[n]});return r};t.prototype.getPlayerParams=function(e){var t=e.getSlotId();return u({videoId:t,profileId:e.getProfileId(),rand:this._playerTrackerParams[t]?this._playerTrackerParams[t].rand:null},this._playerTrackerParams[t])};t.prototype.send=function(e){if(this._trackerParams){var r=t.normalizeDataForServer(u({referer:t.getReferer()},this._trackerParams,e));Object(a.u)(Object(a.b)(c.a.statsUrl+"/stats",r))}else this._queueEvents.push(e)};t.prototype._checkTime=function(){var e=this;this._data.forEach(function(r,n){var i=r.player,o=r.currentTime,a=r.lastTime,c=r.container;if(i.inStatus([s.a.PLAYED,s.a.REPLAYED,s.a.STARTED])){e._data[n].currentTime+=d;p.forEach(function(r){if(a<r&&o>=r){e._data[n].lastTime=o;e.send(u({event:r+"s",container:t.normalizeValue(c)},e.getPlayerParams(i)))}})}})};t.prototype._eventTriggered=function(e){var r=this,n=e.eventName,i=e.player,o=e.container;this._events.forEach(function(a){var s=a.playerName,c=a.trackingName;n===s&&("string"==typeof c?r.send(u({event:c,container:t.normalizeValue(o)},r.getPlayerParams(i))):"function"==typeof c&&c(e))})};t.prototype._userActionTracking=function(e){var r=e.player;this.send(u({event:"action"+e.trackingParams.name,container:t.normalizeValue(e.container)},this.getPlayerParams(r)))};t.prototype._currentTimeUpdated=function(e){var r=e.player,n=e.container,i=r.getCurrentTime(),o=r.getSlotId(),a=r.getDuration(),s=this._players[o],c=s.firstQuartile,l=s.midpoint,d=s.thirdQuartile,p=s.lastTime;if(!c&&p<.25*a&&i>=.25*a){this._players[o].firstQuartile=!0;this.send(u({event:"firstQuartile",container:t.normalizeValue(n)},this.getPlayerParams(r)))}if(!l&&p<.5*a&&i>=.5*a){this._players[o].midpoint=!0;this.send(u({event:"midpoint",container:t.normalizeValue(n)},this.getPlayerParams(r)))}if(!d&&p<.75*a&&i>=.75*a){this._players[o].thirdQuartile=!0;this.send(u({event:"thirdQuartile",container:t.normalizeValue(n)},this.getPlayerParams(r)))}this._players[o].lastTime=i};t.prototype._videoEnded=function(e){var r=e.player,n=e.container,i=r.getSlotId();if(!this._players[i].complete){this._players[i].complete=!0;this.send(u({event:"complete",container:t.normalizeValue(n)},this.getPlayerParams(r)))}};return t}(l.a)},855:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(60);t.a=function(e){function t(r){n(this,t);var o=i(this,e.call.apply(e,[this].concat(r)));o._players=[];o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){this.subscribeTracking(this._addedPlayer.bind(this),"Player:added");this.subscribeTracking(this._selectedQuality.bind(this),"Player:qualitySelected");this.subscribeTracking(this._settingsPanelOpened.bind(this),"Player:settingsPanelOpened")};t.prototype._addedPlayer=function(e){this._players.push(e.player)};t.prototype._selectedQuality=function(e){this._players.forEach(function(t){t!==e.player&&t.setQuality(e.trackingParams.quality)})};t.prototype._settingsPanelOpened=function(e){this._players.forEach(function(t){t!==e.player&&t.hideSettingsPanel()})};return t}(a.a)},856:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(111),s=r(21),c=r(60),l=r(69);t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._players={};o._requested=[];o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){this.subscribeTracking(this._startupLoaded.bind(this),{eventName:"Init:StartupDataLoaded",container:l.a.stdPlayer});this.subscribeTracking(this._iframeLoaded.bind(this),{eventName:"Init:IframeLoaded",container:l.a.stdPlayer});this.subscribeTracking(this._playerAdded.bind(this),{eventName:"Player:added",container:l.a.stdPlayer})};t.prototype._updateData=function(e){if(!this._requested.find(function(t){return t===e})){this._requested.push(e);var t=e.getSlotId();Object(a.a)(t).then(function(t){e.init({data:t.items[0]})},function(e){return s.a.error("CacheIframeController._updateData("+t+"): "+e)})}};t.prototype._checkUpdate=function(e,t){var r=this;this._players[e]||(this._players[e]={});if(this._players[e].time){if(this._players[e].time!==t){s.a.log("CacheIframeController.checkUpdate("+e+", "+t+"). Need reset cache");this._players[e].needUpdate=!0;this._players[e].items&&this._players[e].items.forEach(function(e){return r._updateData(e)})}}else this._players[e].time=t};t.prototype._iframeLoaded=function(e){var t=e.data,r=t.lastVideoUpdate,n=t.npvid;r&&this._checkUpdate(n,r)};t.prototype._startupLoaded=function(e){var t=this;e.data.players.forEach(function(e){t._checkUpdate(e.requestedParam,e.lastUpdate)})};t.prototype._playerAdded=function(e){var t=e.slotId,r=e.player;this._players[t]?this._players[t].items?this._players[t].items.push(r):this._players[t].items=[r]:this._players[t]={items:[r]};this._players[t].needUpdate&&this._updateData(r)};return t}(c.a)},9:function(e,t,r){"use strict";r.d(t,"g",function(){return f});r.d(t,"b",function(){return y});r.d(t,"d",function(){return v});r.d(t,"e",function(){return _});r.d(t,"f",function(){return P});r.d(t,"c",function(){return O});r.d(t,"a",function(){return j});r.d(t,"i",function(){return S});r.d(t,"h",function(){return E});r.d(t,"j",function(){return T});var n=navigator,i=n.userAgent,o=n.vendor,a=n.plugins,s=n.appVersion,c=n.platform,l=window,u=l.opera,d=l.MSStream,p=i||o||u,f=/^((?!chrome|android).)*safari/i.test(p),h=function(){var e=p.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}(),y=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),v=/Firefox/.test(p),g=/iPod/.test(p)&&!d,b=/iPhone/.test(p)&&!d,m=/iPad/.test(p)&&!d,_=g||b||m,w=/android/i.test(p),P=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(p)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(p.substr(0,4)),O=((void 0===a||0===a.length)&&("undefined"==typeof ActiveXObject||new ActiveXObject("ShockwaveFlash.ShockwaveFlash")),/Edge/.test(p)),k=function(){if(!_)return!1;if("string"!=typeof s)return!1;var e=s.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseFloat(e[1]+"."+e[2])}(),j=!P||_&&k>10.2||w&&h&&h>=53||w&&v,S=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t);window.removeEventListener("testPassive",null,t)}catch(t){e=!1}return e}(),E="WebKitMediaSource"in window||"MediaSource"in window,T=!!c&&c.indexOf("Win")>-1},96:function(e,t,r){"use strict";var n=r(3),i=r(58),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e,t,r,a){var s=Object(n.c)(t,"div",{width:"100%",height:"100%",position:"relative",cursor:"pointer",zIndex:100});r&&s.addEventListener("click",function(e){r(e)});var c={position:"absolute",top:0,left:0,width:"100%",height:"100%"},l=Object(n.c)(s,"div",o({},c,{zIndex:20}),e);Object(n.d)(l.firstElementChild,{position:"absolute",top:0,left:0,width:"100%",height:"100%"});Object(i.a)(s,a);return s}},97:function(e,t,r){"use strict";t.a={EDITOR:"editor",USER:"user"}}});